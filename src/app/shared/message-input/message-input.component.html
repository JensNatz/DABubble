<div class="message-input" (clickOutside)="onTagListClickOutside()">
    <app-tag-selection-list class="tag-selection-list"
        *ngIf="isTagSelectionListOpen"
        [type]="taglistType"
        (tagSelected)="onTagSelected($event)"
    >
    </app-tag-selection-list>
    <span  class="placeholder" [class.hidden]="!isPlaceholderVisible" contenteditable="false">
        {{placeholder}}
    </span>
    <div  #messageInput 
        contenteditable="true"
        class="pseudo-input" 
        (input)="onInputChange()"
        (click)="onInputClick()"
        (paste)="onPaste($event)"
        (keydown)="onKeyDown($event)" >
    </div>
    <div class="toolbar">
        <div class="toolbar-left">
            <div class="emoji-container">
                <img class="toolbar-icon" src="assets/img/emoji.svg" alt="Emojis" (click)="onEmojiButtonClick()" />
                <div class="emoji-picker-overlay" *ngIf="isEmojiPickerOpen" (click)="onEmojiOverlayClick($event)">
                    <app-emoji-picker class="emoji-picker"
                        (emojiSelected)="onEmojiSelected($event)"
                    ></app-emoji-picker>
                </div>
            </div>
            <img *ngIf="!isTaggingDisabled" class="toolbar-icon" src="assets/img/at_symbol.svg" alt="Tag" (click)="onTagUserIconClick()" />
        </div>
            @if (type === 'send') {
            <button class="send-button" [disabled]="isSendButtonDisabled" (click)="onSendClick()">
            </button>
            }
            @if (type === 'edit') {
            <div class="edit-buttons">
                <app-button label="Abbrechen" size="small" type="secondary" (click)="onCancelEditClick()"></app-button>
                <app-button label="Speichern" size="small" type="primary" [disabled]="isSendButtonDisabled" (click)="onSaveEditClick()"></app-button>
            </div>
            }
    </div>
</div>